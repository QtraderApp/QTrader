portfolio_risk_policy:
  #############################################################################
  # Metadata
  #############################################################################
  name: "naive"
  description: "A basic risk policy with simple constraints."
  version: "1.0.0"
  date_created: "2025-10-29"
  author: "QTrader Team"
  policy_scope: "portfolio"

  #############################################################################
  # Evaluation / Clock
  #############################################################################
  evaluation:
    # end_of_day | bar_close | intraday
    mode: "end_of_day"
    clock_alignment: "exchange_calendar"

  #############################################################################
  # Sizing (global defaults; per-strategy overrides can be added later)
  #############################################################################
  sizing:
    # fixed_equity_pct | volatility_targeting | kelly_criterion | risk_parity | equal_weighting
    algorithm: "fixed_equity_pct"

    # Applies when algorithm == fixed_equity_pct
    fixed_equity_pct: 0.95 # 10% of equity per new position

    # Applies when algorithm == volatility_targeting
    volatility_targeting:
      target_volatility_pct: null # e.g., 0.12 for 12% annualized

    # Applies when algorithm == kelly_criterion
    kelly_criterion:
      fraction: 0.5 # fractional Kelly (0..1), always capped upstream

  #############################################################################
  # Cash & Liquidity
  #############################################################################
  cash_management:
    cash_buffer_pct: 0.05 # keep 5% cash unallocated

  limits:
    liquidity:
      max_participation_adv: 0.10 # â‰¤10% of ADV per order
      min_ticket_usd: 100

    #############################################################################
    # Aggregate Portfolio Limits
    #############################################################################
    leverage:
      allow_leveraged_positions: false
      max_gross_leverage: 1.0 # gross_exposure / equity
      max_net_leverage: 1.0 # |net_exposure| / equity

    shorting:
      allow_short_positions: false

    margin_policy:
      allow_negative_cash: false
      initial_margin_rate: null # e.g., 0.5 for equities
      short_margin_rate: null # e.g., 1.5 for shorts

    concentration:
      max_sector_exposure_pct: null
      max_industry_exposure_pct: null
      max_country_exposure_pct: null
      max_asset_exposure_pct: null
      max_position_size_pct: 1.0 # cap per single name (1.0 = 100%)

    portfolio_drawdown:
      max_drawdown_pct: null # e.g., 0.15 = 15% peak-to-trough
      daily_loss_limit_pct: null # e.g., 0.05 = 5% day loss stop

    position_count:
      max_positions: null

    diversification:
      max_correlation_between_positions: null

  #############################################################################
  # Drawdown Throttling (optional risk-on/risk-off scaling)
  #############################################################################
  drawdown_controls:
    thresholds: [] # e.g., [0.05, 0.10, 0.15]
    multipliers: [] # e.g., [0.7, 0.5, 0.0]  (same length as thresholds)

  #############################################################################
  # Strategy-Level Limits (defaults; can add overrides per strategy later)
  #############################################################################
  strategy_limits:
    defaults:
      max_drawdown_pct: null
      enforce_stop_loss: false
      max_stop_loss_pct: null # e.g., 0.05 = 5%
      enforce_take_profit: false
      min_take_profit_pct: null # e.g., 0.10 = 10%
    strategy_overrides: {} # e.g., { "momentum": { ... }, "buy_hold": { ... } }

  #############################################################################
  # Execution Risk Controls
  #############################################################################
  execution_controls:
    max_slippage_pct: null # allowed slippage as % of price
    max_commission_pct: null # commission cap as % of trade notional
    max_order_size_pct_of_adv: null # cap order size as % of ADV

  #############################################################################
  # Rebalancing Behavior
  #############################################################################
  rebalancing:
    rebalance_on_risk_breach: false
    # proportional_reduction | largest_first | null
    rebalance_strategy: null
